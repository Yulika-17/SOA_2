(function(){"use strict";var e={417:function(e,t,r){var o=r(5130),a=r(6768);const n={id:"app"},l={class:"operation"},s={class:"operation"},u={class:"operation"},i={class:"operation"},m={class:"operation"},p={class:"operation"},d={class:"operation"},c={class:"operation"};function f(e,t,r,o,f,v){const k=(0,a.g2)("FilterSortApartmentForm"),L=(0,a.g2)("AddApartmentForm"),h=(0,a.g2)("GetApartmentByIdForm"),y=(0,a.g2)("UpdateApartmentForm"),b=(0,a.g2)("DeleteApartmentForm"),g=(0,a.g2)("AverageNumberOfRooms"),F=(0,a.g2)("TransportCount"),O=(0,a.g2)("FurnishFilter");return(0,a.uX)(),(0,a.CE)("div",n,[t[8]||(t[8]=(0,a.Lk)("h1",null,"Базовые операции",-1)),(0,a.Lk)("div",l,[(0,a.Lk)("h2",{onClick:t[0]||(t[0]=e=>v.toggleForm("filterSortApartments")),class:"blue-header"}," Получить список квартир с фильтрацией, сортировкой и постраничным выводом "),"filterSortApartments"===f.activeForm?((0,a.uX)(),(0,a.Wv)(k,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",s,[(0,a.Lk)("h2",{onClick:t[1]||(t[1]=e=>v.toggleForm("addApartment")),class:"green-header"}," Добавить новую квартиру "),"addApartment"===f.activeForm?((0,a.uX)(),(0,a.Wv)(L,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",u,[(0,a.Lk)("h2",{onClick:t[2]||(t[2]=e=>v.toggleForm("getApartment")),class:"blue-header"}," Получить квартиру по ID "),"getApartment"===f.activeForm?((0,a.uX)(),(0,a.Wv)(h,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",i,[(0,a.Lk)("h2",{onClick:t[3]||(t[3]=e=>v.toggleForm("updateApartment")),class:"yellow-header"}," Обновить квартиру по ID "),"updateApartment"===f.activeForm?((0,a.uX)(),(0,a.Wv)(y,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",m,[(0,a.Lk)("h2",{onClick:t[4]||(t[4]=e=>v.toggleForm("deleteApartment")),class:"red-header"}," Удалить квартиру по ID "),"deleteApartment"===f.activeForm?((0,a.uX)(),(0,a.Wv)(b,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)]),t[9]||(t[9]=(0,a.Lk)("h1",null,"Дополнительные операции",-1)),(0,a.Lk)("div",p,[(0,a.Lk)("h2",{onClick:t[5]||(t[5]=e=>v.toggleForm("numberOfRoomsApartment")),class:"blue-header"}," Рассчитать среднее значение поля numberOfRooms для всех квартир "),"numberOfRoomsApartment"===f.activeForm?((0,a.uX)(),(0,a.Wv)(g,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",d,[(0,a.Lk)("h2",{onClick:t[6]||(t[6]=e=>v.toggleForm("TransportCountApartment")),class:"blue-header"}," Вернуть количество квартир с transport больше заданного значения "),"TransportCountApartment"===f.activeForm?((0,a.uX)(),(0,a.Wv)(F,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",c,[(0,a.Lk)("h2",{onClick:t[7]||(t[7]=e=>v.toggleForm("FurnishFilterApartment")),class:"blue-header"}," Вернуть массив квартир с furnish больше заданного значения "),"FurnishFilterApartment"===f.activeForm?((0,a.uX)(),(0,a.Wv)(O,{key:0,onClose:v.closeForm},null,8,["onClose"])):(0,a.Q3)("",!0)])])}var v=r(4232);const k={class:"add-apartment-form"},L={class:"form-group"},h={class:"form-group"},y={class:"form-group"},b={class:"form-group"},g={class:"form-group"},F={class:"form-group"},O={class:"form-group"},C={class:"form-group"},M={class:"form-group"},T={class:"form-group"},x={class:"form-group"},_={key:0,class:"error-message"},E={key:1,class:"success-message"};function q(e,t,r,n,l,s){return(0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("form",{onSubmit:t[15]||(t[15]=(0,o.D$)(((...e)=>s.submitApartment&&s.submitApartment(...e)),["prevent"]))},[(0,a.Lk)("div",L,[t[16]||(t[16]=(0,a.Lk)("label",{for:"name"},"Название",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.flat.name=e),required:"",class:(0,v.C4)({"is-invalid":!l.flat.name}),placeholder:"Введите название"},null,2),[[o.Jo,l.flat.name]])]),(0,a.Lk)("div",h,[t[17]||(t[17]=(0,a.Lk)("label",{for:"coordinates"},"Координаты",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>l.flat.coordinates.x=e),required:"",class:(0,v.C4)({"is-invalid":null===l.flat.coordinates.x}),placeholder:"X"},null,2),[[o.Jo,l.flat.coordinates.x]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>l.flat.coordinates.y=e),required:"",class:(0,v.C4)({"is-invalid":null===l.flat.coordinates.y}),placeholder:"Y"},null,2),[[o.Jo,l.flat.coordinates.y]])]),(0,a.Lk)("div",y,[t[18]||(t[18]=(0,a.Lk)("label",{for:"area"},"Площадь (м²)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"area","onUpdate:modelValue":t[3]||(t[3]=e=>l.flat.area=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.area<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.area]])]),(0,a.Lk)("div",b,[t[19]||(t[19]=(0,a.Lk)("label",{for:"numberOfRooms"},"Количество комнат",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"numberOfRooms","onUpdate:modelValue":t[4]||(t[4]=e=>l.flat.numberOfRooms=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.numberOfRooms<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.numberOfRooms]])]),(0,a.Lk)("div",g,[t[21]||(t[21]=(0,a.Lk)("label",{for:"furnish"},"Мебель",-1)),(0,a.bo)((0,a.Lk)("select",{id:"furnish","onUpdate:modelValue":t[5]||(t[5]=e=>l.flat.furnish=e)},t[20]||(t[20]=[(0,a.Fv)('<option disabled value="" data-v-391c915f>Выберите</option><option value="DESIGNER" data-v-391c915f>Дизайнерская</option><option value="FINE" data-v-391c915f>Хорошая</option><option value="BAD" data-v-391c915f>Плохая</option><option value="LITTLE" data-v-391c915f>Небольшая</option>',5)]),512),[[o.u1,l.flat.furnish]])]),(0,a.Lk)("div",F,[t[23]||(t[23]=(0,a.Lk)("label",{for:"view"},"Вид",-1)),(0,a.bo)((0,a.Lk)("select",{id:"view","onUpdate:modelValue":t[6]||(t[6]=e=>l.flat.view=e),required:""},t[22]||(t[22]=[(0,a.Lk)("option",{disabled:"",value:""},"Выберите",-1),(0,a.Lk)("option",{value:"STREET"},"Улица",-1),(0,a.Lk)("option",{value:"YARD"},"Двор",-1),(0,a.Lk)("option",{value:"GOOD"},"Хороший",-1)]),512),[[o.u1,l.flat.view]])]),(0,a.Lk)("div",O,[t[25]||(t[25]=(0,a.Lk)("label",{for:"transport"},"Транспорт",-1)),(0,a.bo)((0,a.Lk)("select",{id:"transport","onUpdate:modelValue":t[7]||(t[7]=e=>l.flat.transport=e),required:""},t[24]||(t[24]=[(0,a.Fv)('<option disabled value="" data-v-391c915f>Выберите</option><option value="FEW" data-v-391c915f>Мало</option><option value="NONE" data-v-391c915f>Нет</option><option value="NORMAL" data-v-391c915f>Обычный</option><option value="ENOUGH" data-v-391c915f>Достаточно</option>',5)]),512),[[o.u1,l.flat.transport]])]),(0,a.Lk)("div",C,[t[26]||(t[26]=(0,a.Lk)("label",{for:"house"},"Дом",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>l.flat.house.name=e),required:"",class:(0,v.C4)({"is-invalid":!l.flat.house.name}),placeholder:"Имя дома"},null,2),[[o.Jo,l.flat.house.name]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>l.flat.house.numberOfFlatsOnFloor=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.house.numberOfFlatsOnFloor<=0}),placeholder:"Квартир на этаже (больше 0)"},null,2),[[o.Jo,l.flat.house.numberOfFlatsOnFloor]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>l.flat.house.numberOfLifts=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.house.numberOfLifts<=0}),placeholder:"Лифтов (больше 0)"},null,2),[[o.Jo,l.flat.house.numberOfLifts]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=e=>l.flat.house.year=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.house.year>210||l.flat.house.year<=0}),placeholder:"Год постройки (1-210)"},null,2),[[o.Jo,l.flat.house.year]])]),(0,a.Lk)("div",M,[t[27]||(t[27]=(0,a.Lk)("label",{for:"price"},"Цена",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"price","onUpdate:modelValue":t[12]||(t[12]=e=>l.flat.price=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.price<=0}),min:"0",placeholder:"Введите цену"},null,2),[[o.Jo,l.flat.price]])]),(0,a.Lk)("div",T,[t[28]||(t[28]=(0,a.Lk)("label",{for:"numberOfRooms"},"Время до метро пешком",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"timeToMetroByFoot","onUpdate:modelValue":t[13]||(t[13]=e=>l.flat.timeToMetroByFoot=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.timeToMetroByFoot<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.timeToMetroByFoot]])]),(0,a.Lk)("div",x,[t[29]||(t[29]=(0,a.Lk)("label",{for:"numberOfRooms"},"Время до метро на транспорте",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"timeToMetroByTransport","onUpdate:modelValue":t[14]||(t[14]=e=>l.flat.timeToMetroByTransport=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.timeToMetroByTransport<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.timeToMetroByTransport]])]),t[30]||(t[30]=(0,a.Lk)("button",{type:"submit",class:"submit-button"},"Добавить квартиру",-1)),l.errorMessage?((0,a.uX)(),(0,a.CE)("p",_,(0,v.v_)(l.errorMessage),1)):(0,a.Q3)("",!0),l.successMessage?((0,a.uX)(),(0,a.CE)("p",E,(0,v.v_)(l.successMessage),1)):(0,a.Q3)("",!0)],32)])}var S=r(9607);const B=S.A.create({baseURL:"https://localhost:8443/api/v1",headers:{"Content-Type":"application/xml"}});var A=B,D=r(1699),w={data(){return{flat:{creationDate:"",name:"",coordinates:{x:"",y:""},area:"",numberOfRooms:"",furnish:"",view:"",transport:"",house:{name:"",numberOfFlatsOnFloor:"",numberOfLifts:"",year:""},price:"",timeToMetroByFoot:"",timeToMetroByTransport:""},errorMessage:"",successMessage:""}},methods:{async submitApartment(){this.errorMessage="",this.successMessage="";try{const e=(0,D.js2xml)({flat:{creationDate:this.flat.creationDate,name:this.flat.name,coordinates:{x:this.flat.coordinates.x,y:this.flat.coordinates.y},area:this.flat.area,numberOfRooms:this.flat.numberOfRooms,furnish:this.flat.furnish,view:this.flat.view,transport:this.flat.transport,house:{name:this.flat.house.name,numberOfFlatsOnFloor:this.flat.house.numberOfFlatsOnFloor,numberOfLifts:this.flat.house.numberOfLifts,year:this.flat.house.year},price:this.flat.price,timeToMetroByFoot:this.flat.timeToMetroByFoot,timeToMetroByTransport:this.flat.timeToMetroByTransport}},{compact:!0,ignoreComment:!0,spaces:4}),t=await A.post("/flats",e,{headers:{"Content-Type":"application/xml"}});201===t.status&&(this.successMessage="Квартира успешно добавлена!")}catch(e){if(e.response&&e.response.data){const t=new DOMParser,r=t.parseFromString(e.response.data,"application/xml"),o=r.querySelector("message");this.errorMessage=o?o.textContent:"Не поступило ошибки от сервера"}else this.errorMessage="Сервер не работает"}}}},R=r(1241);const I=(0,R.A)(w,[["render",q],["__scopeId","data-v-391c915f"]]);var N=I;const X={class:"delete-apartment-form"},U={class:"form-group"},V={key:0,class:"error-message"},P={key:1,class:"success-message"};function J(e,t,r,n,l,s){return(0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("form",{onSubmit:t[1]||(t[1]=(0,o.D$)(((...e)=>s.submitDelete&&s.submitDelete(...e)),["prevent"]))},[(0,a.Lk)("div",U,[t[2]||(t[2]=(0,a.Lk)("label",{for:"id"},"ID квартиры для удаления",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"id","onUpdate:modelValue":t[0]||(t[0]=e=>l.apartmentId=e),required:"",class:(0,v.C4)({"is-invalid":l.apartmentId<=0}),placeholder:"Введите ID квартиры"},null,2),[[o.Jo,l.apartmentId]])]),t[3]||(t[3]=(0,a.Lk)("button",{type:"submit",class:"submit-button"},"Удалить квартиру",-1)),l.errorMessage?((0,a.uX)(),(0,a.CE)("p",V,(0,v.v_)(l.errorMessage),1)):(0,a.Q3)("",!0),l.successMessage?((0,a.uX)(),(0,a.CE)("p",P,(0,v.v_)(l.successMessage),1)):(0,a.Q3)("",!0)],32)])}var Q={data(){return{apartmentId:null,errorMessage:"",successMessage:""}},methods:{async submitDelete(){this.errorMessage="",this.successMessage="";try{const e=await A.delete(`/flats/${this.apartmentId}`,{headers:{"Content-Type":"application/xml"}});204===e.status&&(this.successMessage="Квартира успешно удалена!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message||"Не удалось получить сообщение об ошибке от сервера":this.errorMessage="Сервер не работает"}}}};const G=(0,R.A)(Q,[["render",J],["__scopeId","data-v-08e01c68"]]);var W=G;const $={class:"get-apartment-form"},j={class:"form-group"},Y={key:0,class:"error-message"},z={key:0,class:"apartment-info"};function H(e,t,r,n,l,s){return(0,a.uX)(),(0,a.CE)("div",$,[(0,a.Lk)("form",{onSubmit:t[1]||(t[1]=(0,o.D$)(((...e)=>s.fetchApartment&&s.fetchApartment(...e)),["prevent"]))},[(0,a.Lk)("div",j,[t[2]||(t[2]=(0,a.Lk)("label",{for:"apartmentId"},"ID Квартиры",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"apartmentId","onUpdate:modelValue":t[0]||(t[0]=e=>l.apartmentId=e),required:"",min:"1",placeholder:"Введите ID"},null,512),[[o.Jo,l.apartmentId]])]),t[3]||(t[3]=(0,a.Lk)("button",{type:"submit",class:"submit-button"},"Вывести информацию о квартире",-1)),l.errorMessage?((0,a.uX)(),(0,a.CE)("p",Y,(0,v.v_)(l.errorMessage),1)):(0,a.Q3)("",!0)],32),l.apartment?((0,a.uX)(),(0,a.CE)("div",z,[t[17]||(t[17]=(0,a.Lk)("h3",null,"Информация о квартире",-1)),(0,a.Lk)("table",null,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[t[4]||(t[4]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"ID:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.id),1)]),(0,a.Lk)("tr",null,[t[5]||(t[5]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Название:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.name),1)]),(0,a.Lk)("tr",null,[t[6]||(t[6]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Координаты:")],-1)),(0,a.Lk)("td",null,"X: "+(0,v.v_)(l.apartment.coordinates.x)+", Y: "+(0,v.v_)(l.apartment.coordinates.y),1)]),(0,a.Lk)("tr",null,[t[7]||(t[7]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Дата создания:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.creationDate),1)]),(0,a.Lk)("tr",null,[t[8]||(t[8]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Площадь:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.area)+" м²",1)]),(0,a.Lk)("tr",null,[t[9]||(t[9]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Кол-во комнат:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.numberOfRooms),1)]),(0,a.Lk)("tr",null,[t[10]||(t[10]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Отделка:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.furnish),1)]),(0,a.Lk)("tr",null,[t[11]||(t[11]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Вид:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.view),1)]),(0,a.Lk)("tr",null,[t[12]||(t[12]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Транспорт:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.transport),1)]),(0,a.Lk)("tr",null,[t[13]||(t[13]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Дом:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.house.name)+", Год: "+(0,v.v_)(l.apartment.house.year)+", Этажи: "+(0,v.v_)(l.apartment.house.numberOfFlatsOnFloor)+", Лифты: "+(0,v.v_)(l.apartment.house.numberOfLifts),1)]),(0,a.Lk)("tr",null,[t[14]||(t[14]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Цена:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(s.formatPrice(l.apartment.price))+" ₽",1)]),(0,a.Lk)("tr",null,[t[15]||(t[15]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Время до метро пешком:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.timeToMetroByFoot)+" мин",1)]),(0,a.Lk)("tr",null,[t[16]||(t[16]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Время до метро на транспорте:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(l.apartment.timeToMetroByTransport)+" мин",1)])])])])):(0,a.Q3)("",!0)])}var K={data(){return{apartmentId:"",apartment:null,errorMessage:""}},methods:{async fetchApartment(){this.errorMessage="",this.apartment=null;try{const e=await A.get(`/flats/${this.apartmentId}`,{headers:{Accept:"application/xml"}});if(200===e.status){const t=new DOMParser,r=t.parseFromString(e.data,"application/xml");this.apartment=this.parseApartmentXML(r)}}catch(e){if(e.response&&e.response.data){const t=new DOMParser,r=t.parseFromString(e.response.data,"application/xml"),o=r.querySelector("message");this.errorMessage=o?o.textContent:"Не поступило ошибки от сервера"}else this.errorMessage="Сервер не работает"}},parseApartmentXML(e){const t=e=>e?e.textContent:"";return{id:t(e.querySelector("id")),name:t(e.querySelector("name")),coordinates:{x:t(e.querySelector("coordinates > x")),y:t(e.querySelector("coordinates > y"))},creationDate:t(e.querySelector("creationDate")),area:t(e.querySelector("area")),numberOfRooms:t(e.querySelector("numberOfRooms")),furnish:t(e.querySelector("furnish")),view:t(e.querySelector("view")),transport:t(e.querySelector("transport")),house:{id:t(e.querySelector("house > id")),name:t(e.querySelector("house > name")),year:t(e.querySelector("house > year")),numberOfFlatsOnFloor:t(e.querySelector("house > numberOfFlatsOnFloor")),numberOfLifts:t(e.querySelector("house > numberOfLifts"))},price:t(e.querySelector("price")),timeToMetroByFoot:t(e.querySelector("timeToMetroByFoot")),timeToMetroByTransport:t(e.querySelector("timeToMetroByTransport"))}},formatPrice(e){return Number(e).toLocaleString("ru-RU",{minimumFractionDigits:0})}}};const Z=(0,R.A)(K,[["render",H],["__scopeId","data-v-380147b6"]]);var ee=Z;const te={class:"operation_sort"},re=["onUpdate:modelValue"],oe=["onUpdate:modelValue"],ae=["onClick"],ne={key:0,class:"error"},le={key:0,class:"apartments-list"},se={key:1,class:"error-message"};function ue(e,t,r,n,l,s){return(0,a.uX)(),(0,a.CE)("div",te,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.queryParams,((e,r)=>((0,a.uX)(),(0,a.CE)("div",{key:r,class:"param-row"},[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t=>e.key=t,class:"param-key"},t[2]||(t[2]=[(0,a.Fv)('<option disabled value="" data-v-6c33bea8>Выберите параметр</option><option value="sort" data-v-6c33bea8>Сортировка (sort)</option><option value="filter" data-v-6c33bea8>Фильтрация (filter)</option><option value="page" data-v-6c33bea8>Номер страницы (page)</option><option value="size" data-v-6c33bea8>Размер страницы (size)</option>',5)]),8,re),[[o.u1,e.key]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t=>e.value=t,placeholder:"Введите значение",class:"param-value"},null,8,oe),[[o.Jo,e.value]]),(0,a.Lk)("button",{onClick:e=>s.removeParam(r),class:"remove-button"},"-",8,ae),e.error?((0,a.uX)(),(0,a.CE)("span",ne,(0,v.v_)(e.error),1)):(0,a.Q3)("",!0)])))),128)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.addParam&&s.addParam(...e)),class:"add-button"},"+"),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.fetchFlats&&s.fetchFlats(...e)),class:"fetch-button"}," Получить список квартир "),l.flats&&l.flats.length?((0,a.uX)(),(0,a.CE)("div",le,[t[15]||(t[15]=(0,a.Lk)("h3",null,"Список квартир:",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.flats,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[(0,a.Lk)("table",null,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[t[3]||(t[3]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"ID:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.id),1)]),(0,a.Lk)("tr",null,[t[4]||(t[4]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Название:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.name),1)]),(0,a.Lk)("tr",null,[t[5]||(t[5]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Координаты:")],-1)),(0,a.Lk)("td",null,"X: "+(0,v.v_)(e.coordinates.x)+", Y: "+(0,v.v_)(e.coordinates.y),1)]),(0,a.Lk)("tr",null,[t[6]||(t[6]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Площадь:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.area)+" м²",1)]),(0,a.Lk)("tr",null,[t[7]||(t[7]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Кол-во комнат:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.numberOfRooms),1)]),(0,a.Lk)("tr",null,[t[8]||(t[8]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Отделка:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.furnish),1)]),(0,a.Lk)("tr",null,[t[9]||(t[9]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Вид:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.view),1)]),(0,a.Lk)("tr",null,[t[10]||(t[10]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Транспорт:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.transport),1)]),(0,a.Lk)("tr",null,[t[11]||(t[11]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Дом:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.house.name)+", Год: "+(0,v.v_)(e.house.year)+", Этажи: "+(0,v.v_)(e.house.numberOfFlatsOnFloor)+", Лифты: "+(0,v.v_)(e.house.numberOfLifts),1)]),(0,a.Lk)("tr",null,[t[12]||(t[12]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Цена:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(s.formatPrice(e.price))+" ₽",1)]),(0,a.Lk)("tr",null,[t[13]||(t[13]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Время до метро пешком:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.timeToMetroByFoot)+" мин",1)]),(0,a.Lk)("tr",null,[t[14]||(t[14]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Время до метро на транспорте:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.timeToMetroByTransport)+" мин",1)])])])])))),128))])):(0,a.Q3)("",!0),l.errorMessage?((0,a.uX)(),(0,a.CE)("p",se,(0,v.v_)(l.errorMessage),1)):(0,a.Q3)("",!0)])}r(4114),r(4603),r(7566),r(8721);var ie={data(){return{flats:[],queryParams:[{key:"",value:"",error:""}],errorMessage:""}},methods:{addParam(){this.queryParams.push({key:"",value:"",error:""})},removeParam(e){this.queryParams.splice(e,1)},async fetchFlats(){this.errorMessage="",this.flats=[];const e=new URL("https://localhost:8443/api/v1/flats");let t=!1;if(this.queryParams.forEach((r=>{if("page"===r.key||"size"===r.key)!r.value||isNaN(r.value)||Number(r.value)<=0?(r.error="Введите положительное число",t=!0):(r.error="",e.searchParams.append(r.key,r.value));else if("sort"===r.key){const o=r.value.match(/^<?\s*(id|name|coordinates\.x|coordinates\.y|area|numberOfRooms|furnish|view|transport|house\.year|house\.name|house\.numberOfFlatsOnFloor|house\.numberOfLifts|price|timeToMetroByFoot|timeToMetroByTransport)$/);o?(r.error="",e.searchParams.append(r.key,r.value)):(r.error="Неверный имя столбца",t=!0)}else if("filter"===r.key){const o=/^(id|name|coordinates\.x|coordinates\.y|area|numberOfRooms|furnish|view|transport|house\.year|house\.name|house\.numberOfFlatsOnFloor|house\.numberOfLifts|price|timeToMetroByFoot|timeToMetroByTransport)(=|!=|>|<|>=|<=).+$/;o.test(r.value)?(r.error="",e.searchParams.append(r.key,r.value)):(r.error="Неправильный формат фильтрации. Пример: filter=id=3",t=!0)}else r.error="Параметр обязателен для выбора",t=!0})),t)this.errorMessage="Пожалуйста, исправьте ошибки в параметрах.";else try{const t=await fetch(e.toString(),{method:"GET",headers:{Accept:"application/xml"}});if(t.ok){const e=await t.text(),r=new DOMParser,o=r.parseFromString(e,"application/xml"),a=o.getElementsByTagName("content");0===a.length?this.errorMessage="Нет таких квартир для заданных фильтров.":this.flats=this.parseFlatsFromXML(o)}else{const e=await t.text(),r=new DOMParser,o=r.parseFromString(e,"application/xml"),a=o.querySelector("ErrorDefault > message");this.errorMessage=a?a.textContent:"Произошла ошибка при обработке запроса."}}catch(r){this.errorMessage="Сервер не отвечает"}},parseFlatsFromXML(e){const t=e.getElementsByTagName("content"),r=Array.from(t).map((e=>({id:e.querySelector("id")?.textContent,name:e.querySelector("name")?.textContent,coordinates:{x:e.querySelector("coordinates > x")?.textContent,y:e.querySelector("coordinates > y")?.textContent},area:e.querySelector("area")?.textContent,numberOfRooms:e.querySelector("numberOfRooms")?.textContent,furnish:e.querySelector("furnish")?.textContent,view:e.querySelector("view")?.textContent,transport:e.querySelector("transport")?.textContent,house:{name:e.querySelector("house > name")?.textContent,year:e.querySelector("house > year")?.textContent,numberOfFlatsOnFloor:e.querySelector("house > numberOfFlatsOnFloor")?.textContent,numberOfLifts:e.querySelector("house > numberOfLifts")?.textContent},price:e.querySelector("price")?.textContent,timeToMetroByFoot:e.querySelector("timeToMetroByFoot")?.textContent,timeToMetroByTransport:e.querySelector("timeToMetroByTransport")?.textContent})));return Array.from(new Map(r.map((e=>[e.id,e]))).values())},formatPrice(e){return Number(e).toLocaleString("ru-RU",{minimumFractionDigits:0})}}};const me=(0,R.A)(ie,[["render",ue],["__scopeId","data-v-6c33bea8"]]);var pe=me;const de={class:"update-apartment-form"},ce={class:"form-group"},fe={class:"form-group"},ve={class:"form-group"},ke={class:"form-group"},Le={class:"form-group"},he={class:"form-group"},ye={class:"form-group"},be={class:"form-group"},ge={class:"form-group"},Fe={class:"form-group"},Oe={class:"form-group"},Ce={class:"form-group"},Me={key:0,class:"error-message"},Te={key:1,class:"success-message"};function xe(e,t,r,n,l,s){return(0,a.uX)(),(0,a.CE)("div",de,[(0,a.Lk)("form",{onSubmit:t[16]||(t[16]=(0,o.D$)(((...e)=>s.submitApartment&&s.submitApartment(...e)),["prevent"]))},[(0,a.Lk)("div",ce,[t[17]||(t[17]=(0,a.Lk)("label",{for:"apartmentId"},"ID Квартиры",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"apartmentId","onUpdate:modelValue":t[0]||(t[0]=e=>l.apartmentId=e),required:"",class:(0,v.C4)({"is-invalid":!l.apartmentId}),placeholder:"Введите ID"},null,2),[[o.Jo,l.apartmentId]])]),(0,a.Lk)("div",fe,[t[18]||(t[18]=(0,a.Lk)("label",{for:"name"},"Название",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>l.flat.name=e),required:"",class:(0,v.C4)({"is-invalid":!l.flat.name}),placeholder:"Введите название"},null,2),[[o.Jo,l.flat.name]])]),(0,a.Lk)("div",ve,[t[19]||(t[19]=(0,a.Lk)("label",{for:"coordinates"},"Координаты",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>l.flat.coordinates.x=e),required:"",class:(0,v.C4)({"is-invalid":null===l.flat.coordinates.x}),placeholder:"X"},null,2),[[o.Jo,l.flat.coordinates.x]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>l.flat.coordinates.y=e),required:"",class:(0,v.C4)({"is-invalid":null===l.flat.coordinates.y}),placeholder:"Y"},null,2),[[o.Jo,l.flat.coordinates.y]])]),(0,a.Lk)("div",ke,[t[20]||(t[20]=(0,a.Lk)("label",{for:"area"},"Площадь (м²)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"area","onUpdate:modelValue":t[4]||(t[4]=e=>l.flat.area=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.area<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.area]])]),(0,a.Lk)("div",Le,[t[21]||(t[21]=(0,a.Lk)("label",{for:"numberOfRooms"},"Количество комнат",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"numberOfRooms","onUpdate:modelValue":t[5]||(t[5]=e=>l.flat.numberOfRooms=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.numberOfRooms<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.numberOfRooms]])]),(0,a.Lk)("div",he,[t[23]||(t[23]=(0,a.Lk)("label",{for:"furnish"},"Мебель",-1)),(0,a.bo)((0,a.Lk)("select",{id:"furnish","onUpdate:modelValue":t[6]||(t[6]=e=>l.flat.furnish=e)},t[22]||(t[22]=[(0,a.Fv)('<option disabled value="" data-v-a3d62b24>Выберите</option><option value="DESIGNER" data-v-a3d62b24>Дизайнерская</option><option value="FINE" data-v-a3d62b24>Хорошая</option><option value="BAD" data-v-a3d62b24>Плохая</option><option value="LITTLE" data-v-a3d62b24>Небольшая</option>',5)]),512),[[o.u1,l.flat.furnish]])]),(0,a.Lk)("div",ye,[t[25]||(t[25]=(0,a.Lk)("label",{for:"view"},"Вид",-1)),(0,a.bo)((0,a.Lk)("select",{id:"view","onUpdate:modelValue":t[7]||(t[7]=e=>l.flat.view=e),required:""},t[24]||(t[24]=[(0,a.Lk)("option",{disabled:"",value:""},"Выберите",-1),(0,a.Lk)("option",{value:"STREET"},"Улица",-1),(0,a.Lk)("option",{value:"YARD"},"Двор",-1),(0,a.Lk)("option",{value:"GOOD"},"Хороший",-1)]),512),[[o.u1,l.flat.view]])]),(0,a.Lk)("div",be,[t[27]||(t[27]=(0,a.Lk)("label",{for:"transport"},"Транспорт",-1)),(0,a.bo)((0,a.Lk)("select",{id:"transport","onUpdate:modelValue":t[8]||(t[8]=e=>l.flat.transport=e),required:""},t[26]||(t[26]=[(0,a.Fv)('<option disabled value="" data-v-a3d62b24>Выберите</option><option value="FEW" data-v-a3d62b24>Мало</option><option value="NONE" data-v-a3d62b24>Нет</option><option value="NORMAL" data-v-a3d62b24>Обычный</option><option value="ENOUGH" data-v-a3d62b24>Достаточно</option>',5)]),512),[[o.u1,l.flat.transport]])]),(0,a.Lk)("div",ge,[t[28]||(t[28]=(0,a.Lk)("label",{for:"house"},"Дом",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>l.flat.house.name=e),required:"",class:(0,v.C4)({"is-invalid":!l.flat.house.name}),placeholder:"Имя дома"},null,2),[[o.Jo,l.flat.house.name]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>l.flat.house.numberOfFlatsOnFloor=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.house.numberOfFlatsOnFloor<=0}),placeholder:"Квартир на этаже (больше 0)"},null,2),[[o.Jo,l.flat.house.numberOfFlatsOnFloor]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=e=>l.flat.house.numberOfLifts=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.house.numberOfLifts<=0}),placeholder:"Лифтов (больше 0)"},null,2),[[o.Jo,l.flat.house.numberOfLifts]]),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>l.flat.house.year=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.house.year>210||l.flat.house.year<=0}),placeholder:"Год постройки (1-210)"},null,2),[[o.Jo,l.flat.house.year]])]),(0,a.Lk)("div",Fe,[t[29]||(t[29]=(0,a.Lk)("label",{for:"price"},"Цена",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"price","onUpdate:modelValue":t[13]||(t[13]=e=>l.flat.price=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.price<=0}),min:"0",placeholder:"Введите цену"},null,2),[[o.Jo,l.flat.price]])]),(0,a.Lk)("div",Oe,[t[30]||(t[30]=(0,a.Lk)("label",{for:"timeToMetroByFoot"},"Время до метро пешком",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"timeToMetroByFoot","onUpdate:modelValue":t[14]||(t[14]=e=>l.flat.timeToMetroByFoot=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.timeToMetroByFoot<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.timeToMetroByFoot]])]),(0,a.Lk)("div",Ce,[t[31]||(t[31]=(0,a.Lk)("label",{for:"timeToMetroByTransport"},"Время до метро на транспорте",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"timeToMetroByTransport","onUpdate:modelValue":t[15]||(t[15]=e=>l.flat.timeToMetroByTransport=e),required:"",class:(0,v.C4)({"is-invalid":l.flat.timeToMetroByTransport<=0}),placeholder:"Больше 0"},null,2),[[o.Jo,l.flat.timeToMetroByTransport]])]),t[32]||(t[32]=(0,a.Lk)("button",{type:"submit",class:"submit-button"},"Добавить квартиру",-1)),l.errorMessage?((0,a.uX)(),(0,a.CE)("p",Me,(0,v.v_)(l.errorMessage),1)):(0,a.Q3)("",!0),l.successMessage?((0,a.uX)(),(0,a.CE)("p",Te,(0,v.v_)(l.successMessage),1)):(0,a.Q3)("",!0)],32)])}var _e={data(){return{apartmentId:"",flat:{name:"",coordinates:{x:null,y:null},area:0,numberOfRooms:0,furnish:"",view:"",transport:"",house:{name:"",numberOfFlatsOnFloor:0,numberOfLifts:0,year:0},price:0,timeToMetroByFoot:0,timeToMetroByTransport:0},errorMessage:"",successMessage:""}},methods:{async submitApartment(){if(this.errorMessage="",this.successMessage="",this.apartmentId)try{const e=(0,D.js2xml)({flat:{name:this.flat.name,coordinates:{x:this.flat.coordinates.x,y:this.flat.coordinates.y},area:this.flat.area,numberOfRooms:this.flat.numberOfRooms,furnish:this.flat.furnish,view:this.flat.view,transport:this.flat.transport,house:{name:this.flat.house.name,numberOfFlatsOnFloor:this.flat.house.numberOfFlatsOnFloor,numberOfLifts:this.flat.house.numberOfLifts,year:this.flat.house.year},price:this.flat.price,timeToMetroByFoot:this.flat.timeToMetroByFoot,timeToMetroByTransport:this.flat.timeToMetroByTransport}},{compact:!0,ignoreComment:!0,spaces:4}),t=await A.put(`/flats/${this.apartmentId}`,e,{headers:{"Content-Type":"application/xml"}});200===t.status&&(this.successMessage="Квартира успешно обновлена!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message||"Не удалось получить сообщение об ошибке от сервера":this.errorMessage="Сервер не работает"}else this.errorMessage="Введите ID квартиры."}}};const Ee=(0,R.A)(_e,[["render",xe],["__scopeId","data-v-a3d62b24"]]);var qe=Ee;const Se={class:"average-rooms"},Be={key:0},Ae={key:1},De={key:2,class:"error-message"};function we(e,t,r,o,n,l){return(0,a.uX)(),(0,a.CE)("div",Se,[t[0]||(t[0]=(0,a.Lk)("h2",null,"Среднее значение numberOfRooms:",-1)),null!==n.averageNumberOfRooms?((0,a.uX)(),(0,a.CE)("p",Be,(0,v.v_)(n.averageNumberOfRooms),1)):((0,a.uX)(),(0,a.CE)("p",Ae,"Загрузка...")),n.errorMessage?((0,a.uX)(),(0,a.CE)("p",De,(0,v.v_)(n.errorMessage),1)):(0,a.Q3)("",!0)])}var Re={data(){return{averageNumberOfRooms:null,errorMessage:""}},mounted(){this.fetchAverageNumberOfRooms()},methods:{async fetchAverageNumberOfRooms(){this.errorMessage="";try{const e=await A.get("/flats/average-number-of-rooms",{headers:{Accept:"application/xml"}});if(200===e.status){const t=new DOMParser,r=t.parseFromString(e.data,"application/xml"),o=r.getElementsByTagName("Double")[0]?.textContent;this.averageNumberOfRooms=parseFloat(o)}}catch(e){if(e.response&&e.response.data){const t=new DOMParser,r=t.parseFromString(e.response.data,"application/xml"),o=r.querySelector("message");this.errorMessage=o?o.textContent:"Не поступило ошибки от сервера"}else this.errorMessage="Сервер не работает"}}}};const Ie=(0,R.A)(Re,[["render",we],["__scopeId","data-v-48b2647a"]]);var Ne=Ie;const Xe={class:"transport-count"},Ue={class:"form-group"},Ve={key:0,class:"result-message"},Pe={key:1,class:"error-message"};function Je(e,t,r,n,l,s){return(0,a.uX)(),(0,a.CE)("div",Xe,[(0,a.Lk)("form",{onSubmit:t[1]||(t[1]=(0,o.D$)(((...e)=>s.fetchFlatCount&&s.fetchFlatCount(...e)),["prevent"]))},[(0,a.Lk)("div",Ue,[t[3]||(t[3]=(0,a.Lk)("label",{for:"transport"},"Выберите транспорт",-1)),(0,a.bo)((0,a.Lk)("select",{id:"transport","onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedTransport=e),required:""},t[2]||(t[2]=[(0,a.Fv)('<option disabled value="" data-v-7a880103>Выберите значение</option><option value="FEW" data-v-7a880103>Мало</option><option value="NONE" data-v-7a880103>Нет</option><option value="NORMAL" data-v-7a880103>Обычный</option><option value="ENOUGH" data-v-7a880103>Достаточно</option>',5)]),512),[[o.u1,l.selectedTransport]])]),t[4]||(t[4]=(0,a.Lk)("button",{type:"submit",class:"submit-button"},"Получить количество квартир",-1))],32),l.isSubmitted&&l.count>0?((0,a.uX)(),(0,a.CE)("p",Ve,'Количество квартир с транспортом больше "'+(0,v.v_)(l.selectedTransport)+'": '+(0,v.v_)(l.count),1)):(0,a.Q3)("",!0),l.errorMessage?((0,a.uX)(),(0,a.CE)("p",Pe,(0,v.v_)(l.errorMessage),1)):(0,a.Q3)("",!0)])}var Qe={data(){return{selectedTransport:"",count:null,errorMessage:"",isSubmitted:!1}},methods:{async fetchFlatCount(){this.errorMessage="",this.count=null,this.isSubmitted=!0;try{const e=await A.get("/flats/count-by-transport",{params:{transport:this.selectedTransport},headers:{"Content-Type":"application/xml"}});if(200===e.status){const t=new DOMParser,r=t.parseFromString(e.data,"application/xml"),o=r.querySelector("Long");this.count=parseInt(o.textContent,10)}}catch(e){if(e.response&&e.response.data){const t=new DOMParser,r=t.parseFromString(e.response.data,"application/xml"),o=r.querySelector("message");this.errorMessage=o?o.textContent:"Не поступило ошибки от сервера"}else this.errorMessage="Сервер не работает"}}}};const Ge=(0,R.A)(Qe,[["render",Je],["__scopeId","data-v-7a880103"]]);var We=Ge;const $e={class:"furnish-filter"},je={class:"form-group"},Ye={key:0,class:"apartments-list"},ze={key:1,class:"error-message"};function He(e,t,r,n,l,s){return(0,a.uX)(),(0,a.CE)("div",$e,[(0,a.Lk)("form",{onSubmit:t[1]||(t[1]=(0,o.D$)(((...e)=>s.fetchFilteredFlats&&s.fetchFilteredFlats(...e)),["prevent"]))},[(0,a.Lk)("div",je,[t[3]||(t[3]=(0,a.Lk)("label",{for:"furnish"},"Выберите furnish",-1)),(0,a.bo)((0,a.Lk)("select",{id:"furnish","onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedFurnish=e),required:""},t[2]||(t[2]=[(0,a.Fv)('<option disabled value="" data-v-54033950>Выберите значение</option><option value="DESIGNER" data-v-54033950>Дизайнер</option><option value="FINE" data-v-54033950>Хороший</option><option value="BAD" data-v-54033950>Плохой</option><option value="LITTLE" data-v-54033950>Немного</option>',5)]),512),[[o.u1,l.selectedFurnish]])]),t[4]||(t[4]=(0,a.Lk)("button",{type:"submit",class:"submit-button"},"Получить квартиры",-1))],32),l.apartment&&l.apartment.length?((0,a.uX)(),(0,a.CE)("div",Ye,[(0,a.Lk)("h3",null,'Квартиры с furnish больше "'+(0,v.v_)(l.selectedFurnish)+'":',1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.apartment,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[(0,a.Lk)("table",null,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[t[5]||(t[5]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"ID:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.id),1)]),(0,a.Lk)("tr",null,[t[6]||(t[6]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Название:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.name),1)]),(0,a.Lk)("tr",null,[t[7]||(t[7]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Координаты:")],-1)),(0,a.Lk)("td",null,"X: "+(0,v.v_)(e.coordinates.x)+", Y: "+(0,v.v_)(e.coordinates.y),1)]),(0,a.Lk)("tr",null,[t[8]||(t[8]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Дата создания:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.creationDate),1)]),(0,a.Lk)("tr",null,[t[9]||(t[9]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Площадь:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.area)+" м²",1)]),(0,a.Lk)("tr",null,[t[10]||(t[10]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Кол-во комнат:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.numberOfRooms),1)]),(0,a.Lk)("tr",null,[t[11]||(t[11]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Отделка:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.furnish),1)]),(0,a.Lk)("tr",null,[t[12]||(t[12]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Вид:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.view),1)]),(0,a.Lk)("tr",null,[t[13]||(t[13]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Транспорт:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.transport),1)]),(0,a.Lk)("tr",null,[t[14]||(t[14]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Дом:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.house.name)+", Год: "+(0,v.v_)(e.house.year)+", Этажи: "+(0,v.v_)(e.house.numberOfFlatsOnFloor)+", Лифты: "+(0,v.v_)(e.house.numberOfLifts),1)]),(0,a.Lk)("tr",null,[t[15]||(t[15]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Цена:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(s.formatPrice(e.price))+" ₽",1)]),(0,a.Lk)("tr",null,[t[16]||(t[16]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Время до метро пешком:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.timeToMetroByFoot)+" мин",1)]),(0,a.Lk)("tr",null,[t[17]||(t[17]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Время до метро на транспорте:")],-1)),(0,a.Lk)("td",null,(0,v.v_)(e.timeToMetroByTransport)+" мин",1)])])])])))),128))])):(0,a.Q3)("",!0),l.errorMessage?((0,a.uX)(),(0,a.CE)("p",ze,(0,v.v_)(l.errorMessage),1)):(0,a.Q3)("",!0)])}var Ke={data(){return{selectedFurnish:"",apartment:[],errorMessage:""}},methods:{async fetchFilteredFlats(){this.errorMessage="",this.apartment=[];try{const e=await A.get("/flats/filter-by-furnish",{params:{furnish:this.selectedFurnish},headers:{"Content-Type":"application/xml"}});if(200===e.status){const t=new DOMParser,r=t.parseFromString(e.data,"application/xml"),o=r.getElementsByTagName("item");this.apartment=Array.from(o).map((e=>this.parseApartmentXML(e)))}}catch(e){if(e.response&&e.response.data){const t=new DOMParser,r=t.parseFromString(e.response.data,"application/xml"),o=r.querySelector("message");this.errorMessage=o?o.textContent:"Не поступило ошибки от сервера"}else this.errorMessage="Сервер не работает"}},parseApartmentXML(e){return{id:e.getElementsByTagName("id")[0].textContent,name:e.getElementsByTagName("name")[0].textContent,coordinates:{x:e.getElementsByTagName("x")[0].textContent,y:e.getElementsByTagName("y")[0].textContent},creationDate:e.getElementsByTagName("creationDate")[0].textContent,area:e.getElementsByTagName("area")[0].textContent,numberOfRooms:e.getElementsByTagName("numberOfRooms")[0].textContent,furnish:e.getElementsByTagName("furnish")[0].textContent,view:e.getElementsByTagName("view")[0].textContent,transport:e.getElementsByTagName("transport")[0].textContent,house:{name:e.getElementsByTagName("name")[1].textContent,year:e.getElementsByTagName("year")[0].textContent,numberOfFlatsOnFloor:e.getElementsByTagName("numberOfFlatsOnFloor")[0].textContent,numberOfLifts:e.getElementsByTagName("numberOfLifts")[0].textContent},price:e.getElementsByTagName("price")[0].textContent,timeToMetroByFoot:e.getElementsByTagName("timeToMetroByFoot")[0].textContent,timeToMetroByTransport:e.getElementsByTagName("timeToMetroByTransport")[0].textContent}},formatPrice(e){return Number(e).toLocaleString("ru-RU",{minimumFractionDigits:0})}}};const Ze=(0,R.A)(Ke,[["render",He],["__scopeId","data-v-54033950"]]);var et=Ze,tt={components:{DeleteApartmentForm:W,AddApartmentForm:N,GetApartmentByIdForm:ee,FilterSortApartmentForm:pe,UpdateApartmentForm:qe,AverageNumberOfRooms:Ne,TransportCount:We,FurnishFilter:et},data(){return{activeForm:null}},methods:{toggleForm(e){this.activeForm=this.activeForm===e?null:e},closeForm(){this.activeForm=null}}};const rt=(0,R.A)(tt,[["render",f]]);var ot=rt;(0,o.Ef)(ot).mount("#app")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,o,a,n){if(!o){var l=1/0;for(m=0;m<e.length;m++){o=e[m][0],a=e[m][1],n=e[m][2];for(var s=!0,u=0;u<o.length;u++)(!1&n||l>=n)&&Object.keys(r.O).every((function(e){return r.O[e](o[u])}))?o.splice(u--,1):(s=!1,n<l&&(l=n));if(s){e.splice(m--,1);var i=a();void 0!==i&&(t=i)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[o,a,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,l=o[0],s=o[1],u=o[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(u)var m=u(r)}for(t&&t(o);i<l.length;i++)n=l[i],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(m)},o=self["webpackChunkservice_1"]=self["webpackChunkservice_1"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],(function(){return r(417)}));o=r.O(o)})();
//# sourceMappingURL=app.8f7712a0.js.map